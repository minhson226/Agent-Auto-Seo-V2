====================================================================
MASTER SPEC ADDENDUM: Admin Dashboard & API Layer Implementation
====================================================================
Project: Auto-SEO Platform
Version: 1.1 - Dashboard & API Integration
Date: 2025-12-07
Type: Feature Enhancement - Admin Dashboard & API Layer

====================================================================
1. OVERVIEW & OBJECTIVE
====================================================================

This addendum focuses on implementing a complete, production-ready Admin 
Dashboard and unified API layer for the Auto-SEO platform.

CURRENT STATE:
- Backend microservices exist: api-gateway, auth-service, keyword-ingestion, 
  content-generator, seo-scorer, seo-strategy, analytics, notification-service
- Frontend skeleton exists in frontend/dashboard/ with React + TypeScript + Vite
- Basic dependencies installed (React Query, Axios, TailwindCSS, etc.)
- Production docker-compose.prod.yml configured but missing dashboard service
- CI/CD pipeline exists in .github/workflows/ci-cd.yml

TARGET STATE:
- Fully functional Admin Dashboard accessible via web browser
- Unified REST API (/api/v1/*) exposed through API Gateway
- Complete authentication and authorization flow
- All major platform features accessible via UI
- Production deployment ready with Docker
- CI/CD pipeline includes dashboard build and deployment

====================================================================
2. API LAYER REQUIREMENTS
====================================================================

2.1. UNIFIED REST API THROUGH API GATEWAY
-------------------------------------------

The API Gateway must expose a unified REST API under /api/v1/* that 
aggregates and routes requests to backend microservices.

AUTHENTICATION & USER MANAGEMENT:
  POST   /api/v1/auth/register
  POST   /api/v1/auth/login
  POST   /api/v1/auth/refresh
  GET    /api/v1/auth/me
  PUT    /api/v1/auth/profile
  POST   /api/v1/auth/logout

WORKSPACE & PROJECT MANAGEMENT:
  GET    /api/v1/workspaces
  POST   /api/v1/workspaces
  GET    /api/v1/workspaces/:id
  PUT    /api/v1/workspaces/:id
  DELETE /api/v1/workspaces/:id
  GET    /api/v1/workspaces/:id/members
  POST   /api/v1/workspaces/:id/members

SITE MANAGEMENT:
  GET    /api/v1/workspaces/:wid/sites
  POST   /api/v1/workspaces/:wid/sites
  GET    /api/v1/sites/:id
  PUT    /api/v1/sites/:id
  DELETE /api/v1/sites/:id
  POST   /api/v1/sites/:id/test-connection

KEYWORD INGESTION:
  GET    /api/v1/keyword-lists
  POST   /api/v1/keyword-lists (upload CSV/TXT)
  GET    /api/v1/keyword-lists/:id
  DELETE /api/v1/keyword-lists/:id
  GET    /api/v1/keyword-lists/:id/keywords
  POST   /api/v1/keyword-lists/:id/enrich (trigger enrichment job)
  GET    /api/v1/keyword-jobs/:id (job status)

SEO STRATEGY & CONTENT PLANNING:
  GET    /api/v1/topic-clusters
  POST   /api/v1/topic-clusters
  GET    /api/v1/topic-clusters/:id
  PUT    /api/v1/topic-clusters/:id
  DELETE /api/v1/topic-clusters/:id
  POST   /api/v1/topic-clusters/:id/keywords (add keyword to cluster)
  
  GET    /api/v1/content-plans
  POST   /api/v1/content-plans
  GET    /api/v1/content-plans/:id
  PUT    /api/v1/content-plans/:id
  DELETE /api/v1/content-plans/:id

CONTENT GENERATION:
  GET    /api/v1/articles
  POST   /api/v1/articles (create/generate new article)
  GET    /api/v1/articles/:id
  PUT    /api/v1/articles/:id
  DELETE /api/v1/articles/:id
  GET    /api/v1/articles/:id/content
  POST   /api/v1/articles/:id/regenerate
  GET    /api/v1/generation-jobs/:id (job status)

SEO SCORING:
  GET    /api/v1/articles/:id/seo-score
  POST   /api/v1/articles/:id/score (trigger scoring)
  GET    /api/v1/seo-scores/:id

PUBLISHING:
  POST   /api/v1/articles/:id/publish
  GET    /api/v1/published-posts
  GET    /api/v1/published-posts/:id
  DELETE /api/v1/published-posts/:id (unpublish)

ANALYTICS:
  GET    /api/v1/analytics/overview
  GET    /api/v1/analytics/articles/:id/performance
  GET    /api/v1/analytics/workspace/:id/metrics
  GET    /api/v1/analytics/trends

NOTIFICATIONS & WEBHOOKS:
  GET    /api/v1/notifications
  PUT    /api/v1/notifications/:id/read
  POST   /api/v1/webhooks
  GET    /api/v1/webhooks
  DELETE /api/v1/webhooks/:id

SYSTEM DIAGNOSTICS:
  GET    /api/v1/health
  GET    /api/v1/health/services (all services status)
  GET    /api/v1/system/status
  GET    /api/v1/system/metrics

2.2. API GATEWAY ENHANCEMENTS
-------------------------------

FEATURES TO IMPLEMENT:
- Request routing to appropriate microservices
- JWT authentication middleware
- Rate limiting per user/workspace
- Request/response logging
- Error normalization and standardization
- CORS configuration for dashboard
- API versioning support
- Request validation
- Response caching for read-heavy endpoints

TECHNICAL REQUIREMENTS:
- Support for application/json and multipart/form-data
- Proper HTTP status codes
- Consistent error response format
- Request timeout handling
- Circuit breaker for failing services
- Health check aggregation

====================================================================
3. DASHBOARD REQUIREMENTS
====================================================================

3.1. AUTHENTICATION & AUTHORIZATION
-------------------------------------

LOGIN PAGE:
- Email/password login form
- "Remember me" functionality
- Forgot password link
- Registration link
- JWT token storage
- Auto-redirect if already authenticated

REGISTRATION PAGE:
- Email, password, name fields
- Password strength indicator
- Terms acceptance checkbox
- Email verification (optional for MVP)
- Auto-login after successful registration

AUTHENTICATION FLOW:
- JWT token storage in localStorage/sessionStorage
- Token refresh mechanism
- Automatic logout on token expiration
- Protected routes (redirect to login if not authenticated)
- Role-based access control

3.2. MAIN DASHBOARD LAYOUT
----------------------------

LAYOUT COMPONENTS:
- Top navigation bar with:
  - Logo/brand
  - Workspace selector
  - User profile menu
  - Notifications bell icon
  - Settings icon
  
- Side navigation with:
  - Dashboard (home)
  - Workspaces
  - Keywords
  - Topic Clusters
  - Content Plans
  - Articles
  - Analytics
  - Settings
  
- Main content area
- Footer with version info

3.3. CORE FEATURE PAGES
-------------------------

A. DASHBOARD HOME:
   - Summary cards: Total keywords, articles, published posts, avg SEO score
   - Recent activity timeline
   - Quick actions: Upload keywords, Create content plan, Generate article
   - Performance charts (last 30 days)
   - System health status

B. WORKSPACE MANAGEMENT:
   - List all workspaces
   - Create new workspace
   - Edit workspace details
   - Delete workspace (with confirmation)
   - Workspace members management
   - Workspace settings

C. SITE MANAGEMENT:
   - List sites in current workspace
   - Add new site (WordPress URL, API credentials)
   - Edit site configuration
   - Test WordPress connection
   - Delete site (with confirmation)

D. KEYWORD MANAGEMENT:
   - Upload keywords (CSV/TXT file)
   - List keyword lists
   - View keywords in a list
   - Filter/search keywords
   - Bulk actions (delete, move to cluster)
   - Trigger enrichment job
   - View job status/progress

E. TOPIC CLUSTERING:
   - Drag-and-drop interface for clustering
   - Create new cluster
   - Add keywords to cluster
   - Visual representation of clusters
   - Edit cluster name/type
   - Delete cluster

F. CONTENT PLAN MANAGEMENT:
   - List all content plans
   - Create content plan
   - Edit content plan (title, priority, target keywords)
   - Assign cluster to plan
   - Delete plan
   - View plan details

G. ARTICLE MANAGEMENT:
   - List all articles (drafts, generated, published)
   - Generate new article from content plan
   - View article details
   - Edit article content
   - Preview article
   - View SEO score
   - Regenerate article
   - Delete article

H. SEO SCORING PAGE:
   - View article SEO score
   - Score breakdown (title, meta, headings, keywords, etc.)
   - Recommendations
   - Re-score article
   - Score history

I. PUBLISHING INTERFACE:
   - List publishable articles
   - Publish article to WordPress
   - View published posts
   - Unpublish post
   - Publishing history
   - Publishing status

J. ANALYTICS DASHBOARD:
   - Performance overview
   - Article-level metrics (impressions, clicks, position)
   - Charts: Traffic over time, Top performing articles, Position trends
   - Filters: Date range, site, article
   - Export data

K. NOTIFICATIONS CENTER:
   - List all notifications
   - Mark as read/unread
   - Filter by type
   - Clear all
   - Real-time updates (optional)

L. SYSTEM STATUS PAGE:
   - All services health status
   - Database connections
   - Event bus status
   - Queue depths
   - Recent errors
   - System metrics

M. SETTINGS PAGE:
   - User profile (name, email, password change)
   - Workspace settings
   - API keys management (OpenAI, Google, Ahrefs, etc.)
   - Notification preferences
   - Theme settings (light/dark mode)

3.4. TECHNICAL REQUIREMENTS
-----------------------------

FRAMEWORK & LIBRARIES:
- React 19+ with TypeScript
- Vite for build tooling
- React Router for routing
- React Query for data fetching/caching
- Axios for HTTP client
- TailwindCSS for styling
- Headless UI for accessible components
- Heroicons for icons
- React DnD for drag-and-drop
- Recharts for analytics charts
- Vitest for testing

CODE ORGANIZATION:
frontend/dashboard/src/
  ├── api/           # API client functions
  ├── components/    # Reusable components
  ├── hooks/         # Custom React hooks
  ├── pages/         # Page components
  ├── layouts/       # Layout components
  ├── store/         # State management
  ├── utils/         # Utility functions
  ├── types/         # TypeScript types
  └── config/        # App configuration

STATE MANAGEMENT:
- React Query for server state
- React Context for global UI state
- Local state with useState/useReducer

ERROR HANDLING:
- Global error boundary
- API error interceptor
- User-friendly error messages
- Toast notifications for actions

PERFORMANCE:
- Code splitting
- Lazy loading for routes
- Image optimization
- Debounced search inputs
- Virtualized lists for large datasets

TESTING:
- Unit tests for utilities and hooks
- Component tests with React Testing Library
- Integration tests for key flows
- E2E tests for critical paths (optional)

====================================================================
4. DOCKER & DEPLOYMENT
====================================================================

4.1. DOCKERFILE FOR DASHBOARD
-------------------------------

Requirements:
- Multi-stage build (build stage + nginx serve stage)
- Optimized for production
- Environment variables support
- Health check endpoint

4.2. DOCKER COMPOSE INTEGRATION
---------------------------------

Add dashboard service to docker-compose.prod.yml:
- Service name: dashboard
- Build from frontend/dashboard/Dockerfile
- Environment variables for API URL
- Port mapping
- Depends on api-gateway
- Health checks
- Restart policy

4.3. NGINX CONFIGURATION
-------------------------

Configure Nginx to:
- Serve static files
- Handle SPA routing (fallback to index.html)
- Proxy API requests to api-gateway (if needed)
- Enable gzip compression
- Security headers
- Cache control

====================================================================
5. CI/CD INTEGRATION
====================================================================

5.1. BUILD PIPELINE
--------------------

Add to .github/workflows/ci-cd.yml:
- Install dashboard dependencies
- Run linter (ESLint)
- Run tests (Vitest)
- Build production bundle
- Build Docker image
- Push to container registry

5.2. DEPLOYMENT PIPELINE
-------------------------

- Deploy dashboard container
- Health check before routing traffic
- Rollback on failure
- Smoke tests after deployment

====================================================================
6. DOCUMENTATION REQUIREMENTS
====================================================================

UPDATES NEEDED:
- docs/api/README.md - Add all new API endpoints
- docs/deployment/production-guide.md - Add dashboard deployment
- docs/setup/local-development.md - Add dashboard dev setup
- frontend/dashboard/README.md - Dashboard-specific docs
- API documentation (Swagger/OpenAPI) for all endpoints

CONTENT TO INCLUDE:
- API endpoint documentation with examples
- Dashboard feature guide
- Development setup instructions
- Environment variables reference
- Troubleshooting guide
- Architecture diagrams

====================================================================
7. ACCEPTANCE CRITERIA
====================================================================

API LAYER:
✓ All specified endpoints implemented and functional
✓ JWT authentication working
✓ Rate limiting configured
✓ Error handling standardized
✓ API documentation complete
✓ Integration tests passing

DASHBOARD:
✓ All pages implemented and navigable
✓ Authentication flow working
✓ All CRUD operations functional
✓ Data visualization working
✓ Responsive design
✓ Error handling graceful
✓ Unit/integration tests passing

DEPLOYMENT:
✓ Dockerfile builds successfully
✓ Dashboard service in docker-compose.prod.yml
✓ CI/CD pipeline builds and tests dashboard
✓ Production deployment successful
✓ Health checks passing

DOCUMENTATION:
✓ API docs updated
✓ Deployment guide updated
✓ Developer docs updated
✓ README files current

====================================================================
8. NON-GOALS & CONSTRAINTS
====================================================================

NON-GOALS:
- Mobile native apps
- Offline support
- Real-time collaboration
- Advanced analytics (beyond basic metrics)
- Multi-language support (i18n)
- Advanced theming/customization
- GraphQL API (REST only)

CONSTRAINTS:
- Must use existing microservices architecture
- Must not break existing functionality
- Must maintain backwards compatibility
- Must follow existing code patterns
- Must use existing tech stack
- Must pass all existing tests
- Minimal changes to existing code

====================================================================
9. RISK MITIGATION
====================================================================

RISKS:
- API Gateway changes breaking existing clients
- Performance issues with large datasets
- Security vulnerabilities in authentication
- CORS issues between dashboard and API
- State management complexity

MITIGATIONS:
- Thorough testing before deployment
- API versioning to maintain compatibility
- Pagination for large datasets
- Security audit of auth implementation
- Proper CORS configuration
- Use proven state management patterns

====================================================================
END OF MASTER SPEC ADDENDUM
====================================================================
